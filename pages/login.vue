<template>
  <div class="ui-page">
    <div class="logo-box">
      <div class="logo">
        <div class="logo-text">cmm</div>
      </div>
    </div>
    <div class="ui-content">
      <div v-if="loginForm.show" class="ui-content-auto login-box">
        <div class="login-input">
          <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-input-icon">
            <g clip-path="url(#clip0_297_4035)">
              <path
                d="M17.2765 17.2267C17.2598 16.8832 17.2243 16.5418 17.1638 16.1983C17.0428 15.5053 16.8259 14.8445 16.5129 14.2098C15.9664 13.0991 15.2028 12.1631 14.2036 11.4018C13.4213 10.8013 12.5534 10.3493 11.6001 10.048C11.5396 10.032 11.4791 10.0059 11.4186 9.9898C11.4353 9.98177 11.4457 9.97373 11.454 9.97373C11.8796 9.77287 12.2781 9.5218 12.6348 9.22052C13.1563 8.78666 13.5819 8.26845 13.9011 7.67391C14.3517 6.83835 14.552 5.95256 14.5082 5.00853C14.4915 4.72532 14.456 4.44011 14.3955 4.16493C14.1785 3.20282 13.7092 2.36726 13.0061 1.6502C12.7015 1.34088 12.3552 1.0657 11.9818 0.838732C11.1745 0.346631 10.2983 0.0694475 9.35119 0.0111988C9.09042 -0.00486979 8.8213 -0.00486976 8.56054 0.0192331C8.26639 0.0453446 7.97015 0.0855161 7.68435 0.153808C6.7289 0.378768 5.88818 0.814629 5.16637 1.46541C4.69698 1.89123 4.31522 2.37529 4.02942 2.92765C3.60384 3.74715 3.414 4.60682 3.45572 5.51871C3.46407 5.76978 3.49953 6.02086 3.55169 6.26188C3.75196 7.23203 4.19422 8.07563 4.88891 8.80273C5.34786 9.2868 5.89652 9.68048 6.50359 9.97172C6.51194 9.97976 6.53071 9.97976 6.53905 9.99783C6.34713 10.0561 6.14894 10.1143 5.96745 10.1907C5.77552 10.267 5.58568 10.3413 5.40419 10.4257C4.35277 10.9097 3.44947 11.5705 2.68593 12.4142C2.27705 12.8661 1.93075 13.3582 1.6366 13.8844C1.27152 14.5372 1.02119 15.2302 0.864725 15.9573C0.795882 16.2746 0.743728 16.6 0.724952 16.9194C0.716608 17.0459 0.708263 17.1705 0.697832 17.287C0.697832 17.4035 0.681143 17.5119 0.706177 17.6304C0.749986 17.8473 0.966946 17.998 1.20059 17.9819C1.4259 17.9659 1.60948 17.7811 1.61782 17.5641C1.62617 17.4215 1.62617 17.2709 1.63451 17.1303C1.64286 16.9134 1.66998 16.7045 1.70336 16.4875C1.7722 16.0617 1.87651 15.6339 2.03297 15.2262C2.37927 14.2821 2.90915 13.4546 3.63096 12.7355C4.10869 12.2595 4.63857 11.8497 5.2373 11.5163C5.7484 11.2231 6.28872 10.9981 6.85198 10.8394C7.25043 10.7229 7.65932 10.6386 8.07655 10.5884C8.34566 10.5542 8.61478 10.5381 8.88389 10.5381C8.90058 10.5381 8.91935 10.5301 8.93604 10.5381H9.0925C9.10085 10.5381 9.11962 10.5381 9.12797 10.5462C9.22393 10.5462 9.31989 10.5462 9.41377 10.5542C9.72669 10.5703 10.048 10.6044 10.3609 10.6627C11.0118 10.7792 11.6376 10.972 12.228 11.2472C13.2001 11.6991 14.0325 12.3258 14.7272 13.1272C15.3259 13.8302 15.7682 14.6075 16.0561 15.4752C16.2042 15.9271 16.3002 16.3871 16.3523 16.8631C16.3794 17.0981 16.3878 17.3311 16.3878 17.5661C16.3961 17.8092 16.5964 18 16.8572 18C17.1096 18 17.3078 17.7991 17.3078 17.5661C17.2765 17.4276 17.2765 17.3271 17.2765 17.2267ZM9.80388 9.56197C9.54311 9.60415 9.28234 9.62826 9.02157 9.6383H8.80462C8.62312 9.64633 8.46666 9.61219 8.29351 9.58809C7.80743 9.5218 7.3464 9.37919 6.90413 9.16227C6.71221 9.06987 6.53071 8.96944 6.35756 8.85295C5.95911 8.58581 5.60237 8.26845 5.30823 7.89084C4.98696 7.48912 4.75331 7.04724 4.59685 6.56116C4.47585 6.19359 4.41327 5.82602 4.38823 5.44038C4.37989 5.18931 4.38823 4.9302 4.4237 4.67913C4.50297 4.14485 4.66778 3.6427 4.94524 3.1747C5.21435 2.70671 5.56065 2.28892 5.99457 1.94546C6.36799 1.63614 6.78522 1.3931 7.24417 1.21835C7.73025 1.02553 8.23301 0.925101 8.75455 0.900998C8.95482 0.892963 9.153 0.892963 9.35327 0.909032C9.57023 0.925101 9.78719 0.959246 9.99581 1.00143C10.4652 1.10186 10.9075 1.26857 11.3247 1.50357C11.6981 1.71246 12.0277 1.96353 12.3323 2.27285C12.5054 2.45764 12.6703 2.64042 12.8184 2.84932C13.0708 3.20885 13.269 3.60253 13.4004 4.01831C13.5131 4.37784 13.5736 4.73738 13.5923 5.11298C13.6007 5.28773 13.5923 5.47252 13.5756 5.64726C13.559 5.87222 13.5151 6.09919 13.463 6.31612C13.3587 6.7098 13.2106 7.0854 12.9936 7.4369C12.7245 7.87879 12.3949 8.27247 11.986 8.59786C11.6814 8.84893 11.3435 9.05782 10.9784 9.22453C10.5924 9.37116 10.2023 9.49569 9.80388 9.56197Z"
                fill="#666666"
              />
            </g>
          </svg>

          <input v-model="loginForm.username" placeholder="请输入手机号码" />
        </div>
        <div class="login-input">
          <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-input-icon">
            <path
              d="M14.6683 17.9794H3.33156C2.34381 17.9794 1.53564 17.1712 1.53564 16.1835V9.52736C1.53564 8.53961 2.34381 7.73145 3.33156 7.73145H14.6571C15.6448 7.73145 16.453 8.53961 16.453 9.52736V16.1835C16.4642 17.1712 15.6561 17.9794 14.6683 17.9794ZM3.33156 8.6294C2.83769 8.6294 2.4336 9.03349 2.4336 9.52736V16.1835C2.4336 16.6774 2.83769 17.0814 3.33156 17.0814H14.6571C15.151 17.0814 15.555 16.6774 15.555 16.1835V9.52736C15.555 9.03349 15.151 8.6294 14.6571 8.6294H3.33156Z"
              fill="#666666"
            />
            <path
              d="M4.33057 8.62969C4.08363 8.62969 3.88159 8.42765 3.88159 8.18071V5.13888C3.88159 2.32153 6.17139 0.0205078 8.99996 0.0205078C11.0204 0.0205078 12.8612 1.2103 13.6806 3.06234C13.9724 3.71337 14.1183 4.42051 14.1183 5.13888C14.1183 5.38581 13.9163 5.58785 13.6693 5.58785C13.4224 5.58785 13.2204 5.38581 13.2204 5.13888C13.2204 4.54398 13.0969 3.9603 12.8612 3.42153C12.1877 1.90622 10.6724 0.918467 8.99996 0.918467C6.66526 0.918467 4.77955 2.81541 4.77955 5.13888V8.18071C4.77955 8.42765 4.57751 8.62969 4.33057 8.62969ZM8.94384 15.8246C8.24792 15.8246 7.67547 15.2521 7.67547 14.5562V13.5797C7.19282 13.1868 6.9122 12.6032 6.9122 11.9746C6.9122 10.8297 7.84384 9.88684 8.99996 9.88684C10.1561 9.88683 11.0877 10.8185 11.0877 11.9746C11.0877 12.6593 10.7622 13.2879 10.2122 13.6695V14.545C10.2122 15.2521 9.63975 15.8246 8.94384 15.8246ZM8.99996 10.7848C8.34894 10.7848 7.81016 11.3123 7.81016 11.9746C7.81016 12.3787 8.0122 12.7603 8.36016 12.9736C8.49486 13.0521 8.5622 13.1981 8.5622 13.3552V14.5562C8.5622 14.7583 8.73057 14.9266 8.93261 14.9266C9.13465 14.9266 9.30302 14.7583 9.30302 14.5562V13.4225C9.30302 13.2542 9.39282 13.097 9.53873 13.0297C9.93159 12.8277 10.1785 12.4236 10.1785 11.9746C10.1898 11.3236 9.65098 10.7848 8.99996 10.7848Z"
              fill="#666666"
            />
          </svg>
          <input
            v-model="loginForm.password"
            :type="loginForm.showPwd ? 'text' : 'password'"
            placeholder="请输入登录密码"
          />
          <div
            class="show-pwd"
            :class="{ close: !loginForm.showPwd }"
            @touchstart.prevent="loginForm.showPwd = !loginForm.showPwd"
          >
            <van-icon name="eye-o" class="block" />
          </div>
        </div>
        <div class="forget-pwd" @click="checkView('forgetPwd')">忘记密码?</div>
        <div class="submit-btn mt-16" @click="handleLogin">登录</div>
        <div class="register-btn" @click="checkView('register')">没有账号，去注册</div>
      </div>
      <div v-if="registerForm.show" class="ui-content-auto login-box">
        <div class="login-input">
          <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-input-icon">
            <g clip-path="url(#clip0_297_4035)">
              <path
                d="M17.2765 17.2267C17.2598 16.8832 17.2243 16.5418 17.1638 16.1983C17.0428 15.5053 16.8259 14.8445 16.5129 14.2098C15.9664 13.0991 15.2028 12.1631 14.2036 11.4018C13.4213 10.8013 12.5534 10.3493 11.6001 10.048C11.5396 10.032 11.4791 10.0059 11.4186 9.9898C11.4353 9.98177 11.4457 9.97373 11.454 9.97373C11.8796 9.77287 12.2781 9.5218 12.6348 9.22052C13.1563 8.78666 13.5819 8.26845 13.9011 7.67391C14.3517 6.83835 14.552 5.95256 14.5082 5.00853C14.4915 4.72532 14.456 4.44011 14.3955 4.16493C14.1785 3.20282 13.7092 2.36726 13.0061 1.6502C12.7015 1.34088 12.3552 1.0657 11.9818 0.838732C11.1745 0.346631 10.2983 0.0694475 9.35119 0.0111988C9.09042 -0.00486979 8.8213 -0.00486976 8.56054 0.0192331C8.26639 0.0453446 7.97015 0.0855161 7.68435 0.153808C6.7289 0.378768 5.88818 0.814629 5.16637 1.46541C4.69698 1.89123 4.31522 2.37529 4.02942 2.92765C3.60384 3.74715 3.414 4.60682 3.45572 5.51871C3.46407 5.76978 3.49953 6.02086 3.55169 6.26188C3.75196 7.23203 4.19422 8.07563 4.88891 8.80273C5.34786 9.2868 5.89652 9.68048 6.50359 9.97172C6.51194 9.97976 6.53071 9.97976 6.53905 9.99783C6.34713 10.0561 6.14894 10.1143 5.96745 10.1907C5.77552 10.267 5.58568 10.3413 5.40419 10.4257C4.35277 10.9097 3.44947 11.5705 2.68593 12.4142C2.27705 12.8661 1.93075 13.3582 1.6366 13.8844C1.27152 14.5372 1.02119 15.2302 0.864725 15.9573C0.795882 16.2746 0.743728 16.6 0.724952 16.9194C0.716608 17.0459 0.708263 17.1705 0.697832 17.287C0.697832 17.4035 0.681143 17.5119 0.706177 17.6304C0.749986 17.8473 0.966946 17.998 1.20059 17.9819C1.4259 17.9659 1.60948 17.7811 1.61782 17.5641C1.62617 17.4215 1.62617 17.2709 1.63451 17.1303C1.64286 16.9134 1.66998 16.7045 1.70336 16.4875C1.7722 16.0617 1.87651 15.6339 2.03297 15.2262C2.37927 14.2821 2.90915 13.4546 3.63096 12.7355C4.10869 12.2595 4.63857 11.8497 5.2373 11.5163C5.7484 11.2231 6.28872 10.9981 6.85198 10.8394C7.25043 10.7229 7.65932 10.6386 8.07655 10.5884C8.34566 10.5542 8.61478 10.5381 8.88389 10.5381C8.90058 10.5381 8.91935 10.5301 8.93604 10.5381H9.0925C9.10085 10.5381 9.11962 10.5381 9.12797 10.5462C9.22393 10.5462 9.31989 10.5462 9.41377 10.5542C9.72669 10.5703 10.048 10.6044 10.3609 10.6627C11.0118 10.7792 11.6376 10.972 12.228 11.2472C13.2001 11.6991 14.0325 12.3258 14.7272 13.1272C15.3259 13.8302 15.7682 14.6075 16.0561 15.4752C16.2042 15.9271 16.3002 16.3871 16.3523 16.8631C16.3794 17.0981 16.3878 17.3311 16.3878 17.5661C16.3961 17.8092 16.5964 18 16.8572 18C17.1096 18 17.3078 17.7991 17.3078 17.5661C17.2765 17.4276 17.2765 17.3271 17.2765 17.2267ZM9.80388 9.56197C9.54311 9.60415 9.28234 9.62826 9.02157 9.6383H8.80462C8.62312 9.64633 8.46666 9.61219 8.29351 9.58809C7.80743 9.5218 7.3464 9.37919 6.90413 9.16227C6.71221 9.06987 6.53071 8.96944 6.35756 8.85295C5.95911 8.58581 5.60237 8.26845 5.30823 7.89084C4.98696 7.48912 4.75331 7.04724 4.59685 6.56116C4.47585 6.19359 4.41327 5.82602 4.38823 5.44038C4.37989 5.18931 4.38823 4.9302 4.4237 4.67913C4.50297 4.14485 4.66778 3.6427 4.94524 3.1747C5.21435 2.70671 5.56065 2.28892 5.99457 1.94546C6.36799 1.63614 6.78522 1.3931 7.24417 1.21835C7.73025 1.02553 8.23301 0.925101 8.75455 0.900998C8.95482 0.892963 9.153 0.892963 9.35327 0.909032C9.57023 0.925101 9.78719 0.959246 9.99581 1.00143C10.4652 1.10186 10.9075 1.26857 11.3247 1.50357C11.6981 1.71246 12.0277 1.96353 12.3323 2.27285C12.5054 2.45764 12.6703 2.64042 12.8184 2.84932C13.0708 3.20885 13.269 3.60253 13.4004 4.01831C13.5131 4.37784 13.5736 4.73738 13.5923 5.11298C13.6007 5.28773 13.5923 5.47252 13.5756 5.64726C13.559 5.87222 13.5151 6.09919 13.463 6.31612C13.3587 6.7098 13.2106 7.0854 12.9936 7.4369C12.7245 7.87879 12.3949 8.27247 11.986 8.59786C11.6814 8.84893 11.3435 9.05782 10.9784 9.22453C10.5924 9.37116 10.2023 9.49569 9.80388 9.56197Z"
                fill="#666666"
              />
            </g>
          </svg>
          <input v-model="registerForm.username" placeholder="请输入您的手机号" />
        </div>
        <div class="login-input">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" fill="none" class="login-input-icon">
            <g clip-path="url(#clip0_297_4111)">
              <path
                d="M16.578 3.02363C16.5358 3.02012 12.2696 2.57891 9.3042 0.425586C9.21455 0.360547 9.11084 0.327148 9.0001 0.327148C8.89111 0.327148 8.78565 0.360547 8.696 0.425586C5.74639 2.5666 1.46436 3.02012 1.42217 3.02363C1.15498 3.04824 0.95459 3.27148 0.95459 3.53867C0.95459 3.65644 0.965137 6.45312 1.91787 9.59258C2.48213 11.4523 3.26084 13.0449 4.23643 14.3246C5.47217 15.9471 7.02256 17.0668 8.84189 17.6504C8.89287 17.6662 8.94561 17.675 9.0001 17.675C9.05459 17.675 9.10732 17.6662 9.15654 17.6504C10.9776 17.0668 12.5263 15.9488 13.762 14.3246C14.7358 13.0467 15.5163 11.4559 16.0806 9.59258C17.0315 6.45312 17.0438 3.65644 17.0438 3.53867C17.0456 3.27148 16.8452 3.05 16.578 3.02363ZM15.9979 3.99394L15.9962 4.02207C15.9452 5.04336 15.7606 7.08769 15.0927 9.29375C13.9202 13.1627 11.8741 15.6236 9.01064 16.608L9.0001 16.6115L8.98955 16.608C6.13486 15.6254 4.09053 13.1732 2.91455 9.31836C2.21494 7.02441 2.04619 4.85 2.004 4.02031L2.00225 3.99219L2.02861 3.98867C3.26963 3.80762 6.43193 3.20117 8.98076 1.48555L8.99658 1.47324L9.01416 1.48555C11.5665 3.20117 14.7288 3.80762 15.9698 3.99043L15.9979 3.99394Z"
                fill="#666666"
              />
              <path
                d="M11.2816 6.17017L8.20899 10.2008L6.64453 8.86313C6.55137 8.78403 6.43184 8.74009 6.30879 8.74009C6.15762 8.74009 6.01348 8.80513 5.91504 8.92114C5.73047 9.13735 5.75508 9.46606 5.97305 9.65063L7.9541 11.3452C8.04551 11.4225 8.17207 11.4682 8.29863 11.4682C8.31445 11.4682 8.33027 11.4682 8.34609 11.4665C8.48672 11.4524 8.6168 11.3786 8.70293 11.2661L12.1078 6.80122C12.1922 6.69048 12.2273 6.55513 12.208 6.41802C12.1904 6.28091 12.1184 6.15962 12.0094 6.07524C11.7791 5.89946 11.4539 5.94341 11.2816 6.17017Z"
                fill="#666666"
              />
            </g>
            <defs>
              <clipPath id="clip0_297_4111">
                <rect width="18" height="18" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <input v-model="registerForm.code" placeholder="请输入验证码" />
          <SendCodeBtn class="code-btn" :phone="registerForm.username" @send="doSendCode"></SendCodeBtn>
        </div>
        <div class="login-input">
          <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-input-icon">
            <path
              d="M14.6683 17.9794H3.33156C2.34381 17.9794 1.53564 17.1712 1.53564 16.1835V9.52736C1.53564 8.53961 2.34381 7.73145 3.33156 7.73145H14.6571C15.6448 7.73145 16.453 8.53961 16.453 9.52736V16.1835C16.4642 17.1712 15.6561 17.9794 14.6683 17.9794ZM3.33156 8.6294C2.83769 8.6294 2.4336 9.03349 2.4336 9.52736V16.1835C2.4336 16.6774 2.83769 17.0814 3.33156 17.0814H14.6571C15.151 17.0814 15.555 16.6774 15.555 16.1835V9.52736C15.555 9.03349 15.151 8.6294 14.6571 8.6294H3.33156Z"
              fill="#666666"
            />
            <path
              d="M4.33057 8.62969C4.08363 8.62969 3.88159 8.42765 3.88159 8.18071V5.13888C3.88159 2.32153 6.17139 0.0205078 8.99996 0.0205078C11.0204 0.0205078 12.8612 1.2103 13.6806 3.06234C13.9724 3.71337 14.1183 4.42051 14.1183 5.13888C14.1183 5.38581 13.9163 5.58785 13.6693 5.58785C13.4224 5.58785 13.2204 5.38581 13.2204 5.13888C13.2204 4.54398 13.0969 3.9603 12.8612 3.42153C12.1877 1.90622 10.6724 0.918467 8.99996 0.918467C6.66526 0.918467 4.77955 2.81541 4.77955 5.13888V8.18071C4.77955 8.42765 4.57751 8.62969 4.33057 8.62969ZM8.94384 15.8246C8.24792 15.8246 7.67547 15.2521 7.67547 14.5562V13.5797C7.19282 13.1868 6.9122 12.6032 6.9122 11.9746C6.9122 10.8297 7.84384 9.88684 8.99996 9.88684C10.1561 9.88683 11.0877 10.8185 11.0877 11.9746C11.0877 12.6593 10.7622 13.2879 10.2122 13.6695V14.545C10.2122 15.2521 9.63975 15.8246 8.94384 15.8246ZM8.99996 10.7848C8.34894 10.7848 7.81016 11.3123 7.81016 11.9746C7.81016 12.3787 8.0122 12.7603 8.36016 12.9736C8.49486 13.0521 8.5622 13.1981 8.5622 13.3552V14.5562C8.5622 14.7583 8.73057 14.9266 8.93261 14.9266C9.13465 14.9266 9.30302 14.7583 9.30302 14.5562V13.4225C9.30302 13.2542 9.39282 13.097 9.53873 13.0297C9.93159 12.8277 10.1785 12.4236 10.1785 11.9746C10.1898 11.3236 9.65098 10.7848 8.99996 10.7848Z"
              fill="#666666"
            />
          </svg>
          <input
            v-model="registerForm.password"
            :type="registerForm.showPwd ? 'text' : 'password'"
            placeholder="请确认登录密码"
          />
          <div
            class="show-pwd"
            :class="{ close: !registerForm.showPwd }"
            @touchstart.prevent="registerForm.showPwd = !registerForm.showPwd"
          >
            <van-icon name="eye-o" class="block" />
          </div>
        </div>
        <div class="login-input">
          <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-input-icon">
            <path
              d="M14.6683 17.9794H3.33156C2.34381 17.9794 1.53564 17.1712 1.53564 16.1835V9.52736C1.53564 8.53961 2.34381 7.73145 3.33156 7.73145H14.6571C15.6448 7.73145 16.453 8.53961 16.453 9.52736V16.1835C16.4642 17.1712 15.6561 17.9794 14.6683 17.9794ZM3.33156 8.6294C2.83769 8.6294 2.4336 9.03349 2.4336 9.52736V16.1835C2.4336 16.6774 2.83769 17.0814 3.33156 17.0814H14.6571C15.151 17.0814 15.555 16.6774 15.555 16.1835V9.52736C15.555 9.03349 15.151 8.6294 14.6571 8.6294H3.33156Z"
              fill="#666666"
            />
            <path
              d="M4.33057 8.62969C4.08363 8.62969 3.88159 8.42765 3.88159 8.18071V5.13888C3.88159 2.32153 6.17139 0.0205078 8.99996 0.0205078C11.0204 0.0205078 12.8612 1.2103 13.6806 3.06234C13.9724 3.71337 14.1183 4.42051 14.1183 5.13888C14.1183 5.38581 13.9163 5.58785 13.6693 5.58785C13.4224 5.58785 13.2204 5.38581 13.2204 5.13888C13.2204 4.54398 13.0969 3.9603 12.8612 3.42153C12.1877 1.90622 10.6724 0.918467 8.99996 0.918467C6.66526 0.918467 4.77955 2.81541 4.77955 5.13888V8.18071C4.77955 8.42765 4.57751 8.62969 4.33057 8.62969ZM8.94384 15.8246C8.24792 15.8246 7.67547 15.2521 7.67547 14.5562V13.5797C7.19282 13.1868 6.9122 12.6032 6.9122 11.9746C6.9122 10.8297 7.84384 9.88684 8.99996 9.88684C10.1561 9.88683 11.0877 10.8185 11.0877 11.9746C11.0877 12.6593 10.7622 13.2879 10.2122 13.6695V14.545C10.2122 15.2521 9.63975 15.8246 8.94384 15.8246ZM8.99996 10.7848C8.34894 10.7848 7.81016 11.3123 7.81016 11.9746C7.81016 12.3787 8.0122 12.7603 8.36016 12.9736C8.49486 13.0521 8.5622 13.1981 8.5622 13.3552V14.5562C8.5622 14.7583 8.73057 14.9266 8.93261 14.9266C9.13465 14.9266 9.30302 14.7583 9.30302 14.5562V13.4225C9.30302 13.2542 9.39282 13.097 9.53873 13.0297C9.93159 12.8277 10.1785 12.4236 10.1785 11.9746C10.1898 11.3236 9.65098 10.7848 8.99996 10.7848Z"
              fill="#666666"
            />
          </svg>
          <input
            v-model="registerForm.confirmPassword"
            :type="registerForm.showPwd ? 'text' : 'password'"
            placeholder="请再次输入密码"
          />
          <div
            class="show-pwd"
            :class="{ close: !registerForm.showPwd }"
            @touchstart.prevent="registerForm.showPwd = !registerForm.showPwd"
          >
            <van-icon name="eye-o" class="block" />
          </div>
        </div>
        <div class="login-input">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" fill="none" class="login-input-icon">
            <path
              d="M8.44023 17.7516C7.15781 17.7516 6.11602 16.7016 6.11602 15.4082V7.95977C6.11602 6.69375 7.13047 5.64922 8.38281 5.61641V2.08086C8.38281 0.932422 9.30977 0 10.4473 0H19.5527C20.6902 0 21.6172 0.935156 21.6172 2.08086V5.61641C22.8695 5.64648 23.884 6.69375 23.884 7.95977V15.4109C23.884 16.7043 22.8422 17.7543 21.5598 17.7543H8.44023V17.7516ZM7.26172 15.4082C7.26172 16.0645 7.78945 16.5977 8.44023 16.5977H21.5598C22.2105 16.5977 22.7383 16.0645 22.7383 15.4082V8.94414L21.6172 9.5375V9.62773H21.4477L14.9453 13.0621L7.26172 9.00156V15.4082ZM14.9453 11.7605L20.4715 8.84023V2.08086C20.4715 1.56953 20.0586 1.15117 19.5527 1.15117H10.4473C9.94141 1.15117 9.52851 1.5668 9.52851 2.08086V8.89766L14.9453 11.7605ZM8.38281 8.29336V6.77031C7.84688 6.79766 7.40391 7.18047 7.29453 7.71641L8.38281 8.29336ZM21.6172 8.2332L22.6945 7.66445C22.566 7.15859 22.1285 6.79492 21.6172 6.77031V8.2332ZM12.1645 6.88516C11.6777 6.47227 11.3988 5.86523 11.3988 5.21719C11.3988 4.02227 12.3504 3.05156 13.518 3.05156C14.0785 3.05156 14.6035 3.27031 15.0027 3.67227C15.3992 3.27305 15.927 3.05156 16.4875 3.05156C17.6551 3.05156 18.6066 4.02227 18.6066 5.21719C18.6066 5.78594 18.3934 6.32187 18.0078 6.72656L18.0051 6.7293L15 9.57031L12.1645 6.88516ZM13.5152 4.34219C13.0477 4.34219 12.6648 4.73594 12.6648 5.21719C12.6648 5.48242 12.7797 5.72852 12.9766 5.89531L12.9984 5.91445L15 7.80937L17.1082 5.81328C17.2531 5.65469 17.3324 5.44141 17.3324 5.21992C17.3324 4.73594 16.9496 4.34492 16.482 4.34492C16.2277 4.34492 15.9898 4.45977 15.8258 4.66211L15 5.69023L14.1715 4.65937C14.0074 4.45976 13.7695 4.34219 13.5152 4.34219Z"
              fill="#666666"
            />
          </svg>
          <input v-model="registerForm.pCode" placeholder="请输入推荐码" />
        </div>

        <div class="submit-btn mt-16" @click="handleRegister">注册</div>
        <div class="register-btn" @click="checkView('login')">已有账号，去登录</div>
      </div>
      <div v-if="forgetPwdForm.show" class="ui-content-auto login-box">
        <div class="view-bar" @click="checkView('login')">
          <svg class="back-btn" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M7.37853 0.280152C7.73549 -0.0793356 8.31439 -0.0948204 8.69031 0.245059C9.06621 0.584932 9.10512 1.159 8.77847 1.54588L8.72354 1.6061L2.28644 8.05187L8.71786 14.3908C9.06662 14.7346 9.09295 15.2863 8.77847 15.6613L8.72354 15.722C8.37741 16.0683 7.82216 16.0943 7.44483 15.7817L7.38375 15.7271L0.279833 8.72567C-0.0687862 8.38178 -0.0949172 7.83014 0.21969 7.45525L0.274622 7.39455L7.37853 0.280152Z"
              fill="black"
            />
            <rect x="2" y="7" width="18" height="2" rx="1" fill="black" />
          </svg>
          <div class="bar-text">忘记密码</div>
        </div>
        <div class="login-input">
          <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-input-icon">
            <g clip-path="url(#clip0_297_4035)">
              <path
                d="M17.2765 17.2267C17.2598 16.8832 17.2243 16.5418 17.1638 16.1983C17.0428 15.5053 16.8259 14.8445 16.5129 14.2098C15.9664 13.0991 15.2028 12.1631 14.2036 11.4018C13.4213 10.8013 12.5534 10.3493 11.6001 10.048C11.5396 10.032 11.4791 10.0059 11.4186 9.9898C11.4353 9.98177 11.4457 9.97373 11.454 9.97373C11.8796 9.77287 12.2781 9.5218 12.6348 9.22052C13.1563 8.78666 13.5819 8.26845 13.9011 7.67391C14.3517 6.83835 14.552 5.95256 14.5082 5.00853C14.4915 4.72532 14.456 4.44011 14.3955 4.16493C14.1785 3.20282 13.7092 2.36726 13.0061 1.6502C12.7015 1.34088 12.3552 1.0657 11.9818 0.838732C11.1745 0.346631 10.2983 0.0694475 9.35119 0.0111988C9.09042 -0.00486979 8.8213 -0.00486976 8.56054 0.0192331C8.26639 0.0453446 7.97015 0.0855161 7.68435 0.153808C6.7289 0.378768 5.88818 0.814629 5.16637 1.46541C4.69698 1.89123 4.31522 2.37529 4.02942 2.92765C3.60384 3.74715 3.414 4.60682 3.45572 5.51871C3.46407 5.76978 3.49953 6.02086 3.55169 6.26188C3.75196 7.23203 4.19422 8.07563 4.88891 8.80273C5.34786 9.2868 5.89652 9.68048 6.50359 9.97172C6.51194 9.97976 6.53071 9.97976 6.53905 9.99783C6.34713 10.0561 6.14894 10.1143 5.96745 10.1907C5.77552 10.267 5.58568 10.3413 5.40419 10.4257C4.35277 10.9097 3.44947 11.5705 2.68593 12.4142C2.27705 12.8661 1.93075 13.3582 1.6366 13.8844C1.27152 14.5372 1.02119 15.2302 0.864725 15.9573C0.795882 16.2746 0.743728 16.6 0.724952 16.9194C0.716608 17.0459 0.708263 17.1705 0.697832 17.287C0.697832 17.4035 0.681143 17.5119 0.706177 17.6304C0.749986 17.8473 0.966946 17.998 1.20059 17.9819C1.4259 17.9659 1.60948 17.7811 1.61782 17.5641C1.62617 17.4215 1.62617 17.2709 1.63451 17.1303C1.64286 16.9134 1.66998 16.7045 1.70336 16.4875C1.7722 16.0617 1.87651 15.6339 2.03297 15.2262C2.37927 14.2821 2.90915 13.4546 3.63096 12.7355C4.10869 12.2595 4.63857 11.8497 5.2373 11.5163C5.7484 11.2231 6.28872 10.9981 6.85198 10.8394C7.25043 10.7229 7.65932 10.6386 8.07655 10.5884C8.34566 10.5542 8.61478 10.5381 8.88389 10.5381C8.90058 10.5381 8.91935 10.5301 8.93604 10.5381H9.0925C9.10085 10.5381 9.11962 10.5381 9.12797 10.5462C9.22393 10.5462 9.31989 10.5462 9.41377 10.5542C9.72669 10.5703 10.048 10.6044 10.3609 10.6627C11.0118 10.7792 11.6376 10.972 12.228 11.2472C13.2001 11.6991 14.0325 12.3258 14.7272 13.1272C15.3259 13.8302 15.7682 14.6075 16.0561 15.4752C16.2042 15.9271 16.3002 16.3871 16.3523 16.8631C16.3794 17.0981 16.3878 17.3311 16.3878 17.5661C16.3961 17.8092 16.5964 18 16.8572 18C17.1096 18 17.3078 17.7991 17.3078 17.5661C17.2765 17.4276 17.2765 17.3271 17.2765 17.2267ZM9.80388 9.56197C9.54311 9.60415 9.28234 9.62826 9.02157 9.6383H8.80462C8.62312 9.64633 8.46666 9.61219 8.29351 9.58809C7.80743 9.5218 7.3464 9.37919 6.90413 9.16227C6.71221 9.06987 6.53071 8.96944 6.35756 8.85295C5.95911 8.58581 5.60237 8.26845 5.30823 7.89084C4.98696 7.48912 4.75331 7.04724 4.59685 6.56116C4.47585 6.19359 4.41327 5.82602 4.38823 5.44038C4.37989 5.18931 4.38823 4.9302 4.4237 4.67913C4.50297 4.14485 4.66778 3.6427 4.94524 3.1747C5.21435 2.70671 5.56065 2.28892 5.99457 1.94546C6.36799 1.63614 6.78522 1.3931 7.24417 1.21835C7.73025 1.02553 8.23301 0.925101 8.75455 0.900998C8.95482 0.892963 9.153 0.892963 9.35327 0.909032C9.57023 0.925101 9.78719 0.959246 9.99581 1.00143C10.4652 1.10186 10.9075 1.26857 11.3247 1.50357C11.6981 1.71246 12.0277 1.96353 12.3323 2.27285C12.5054 2.45764 12.6703 2.64042 12.8184 2.84932C13.0708 3.20885 13.269 3.60253 13.4004 4.01831C13.5131 4.37784 13.5736 4.73738 13.5923 5.11298C13.6007 5.28773 13.5923 5.47252 13.5756 5.64726C13.559 5.87222 13.5151 6.09919 13.463 6.31612C13.3587 6.7098 13.2106 7.0854 12.9936 7.4369C12.7245 7.87879 12.3949 8.27247 11.986 8.59786C11.6814 8.84893 11.3435 9.05782 10.9784 9.22453C10.5924 9.37116 10.2023 9.49569 9.80388 9.56197Z"
                fill="#666666"
              />
            </g>
          </svg>
          <input v-model="forgetPwdForm.username" placeholder="请输入您的手机号" />
        </div>
        <div class="login-input">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" fill="none" class="login-input-icon">
            <g clip-path="url(#clip0_297_4111)">
              <path
                d="M16.578 3.02363C16.5358 3.02012 12.2696 2.57891 9.3042 0.425586C9.21455 0.360547 9.11084 0.327148 9.0001 0.327148C8.89111 0.327148 8.78565 0.360547 8.696 0.425586C5.74639 2.5666 1.46436 3.02012 1.42217 3.02363C1.15498 3.04824 0.95459 3.27148 0.95459 3.53867C0.95459 3.65644 0.965137 6.45312 1.91787 9.59258C2.48213 11.4523 3.26084 13.0449 4.23643 14.3246C5.47217 15.9471 7.02256 17.0668 8.84189 17.6504C8.89287 17.6662 8.94561 17.675 9.0001 17.675C9.05459 17.675 9.10732 17.6662 9.15654 17.6504C10.9776 17.0668 12.5263 15.9488 13.762 14.3246C14.7358 13.0467 15.5163 11.4559 16.0806 9.59258C17.0315 6.45312 17.0438 3.65644 17.0438 3.53867C17.0456 3.27148 16.8452 3.05 16.578 3.02363ZM15.9979 3.99394L15.9962 4.02207C15.9452 5.04336 15.7606 7.08769 15.0927 9.29375C13.9202 13.1627 11.8741 15.6236 9.01064 16.608L9.0001 16.6115L8.98955 16.608C6.13486 15.6254 4.09053 13.1732 2.91455 9.31836C2.21494 7.02441 2.04619 4.85 2.004 4.02031L2.00225 3.99219L2.02861 3.98867C3.26963 3.80762 6.43193 3.20117 8.98076 1.48555L8.99658 1.47324L9.01416 1.48555C11.5665 3.20117 14.7288 3.80762 15.9698 3.99043L15.9979 3.99394Z"
                fill="#666666"
              />
              <path
                d="M11.2816 6.17017L8.20899 10.2008L6.64453 8.86313C6.55137 8.78403 6.43184 8.74009 6.30879 8.74009C6.15762 8.74009 6.01348 8.80513 5.91504 8.92114C5.73047 9.13735 5.75508 9.46606 5.97305 9.65063L7.9541 11.3452C8.04551 11.4225 8.17207 11.4682 8.29863 11.4682C8.31445 11.4682 8.33027 11.4682 8.34609 11.4665C8.48672 11.4524 8.6168 11.3786 8.70293 11.2661L12.1078 6.80122C12.1922 6.69048 12.2273 6.55513 12.208 6.41802C12.1904 6.28091 12.1184 6.15962 12.0094 6.07524C11.7791 5.89946 11.4539 5.94341 11.2816 6.17017Z"
                fill="#666666"
              />
            </g>
            <defs>
              <clipPath id="clip0_297_4111">
                <rect width="18" height="18" fill="white" />
              </clipPath>
            </defs>
          </svg>
          <input v-model="forgetPwdForm.code" placeholder="请输入验证码" />
          <SendCodeBtn class="code-btn" :phone="forgetPwdForm.username" @send="doSendForgetPwdCode"></SendCodeBtn>
        </div>
        <div class="login-input">
          <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-input-icon">
            <path
              d="M14.6683 17.9794H3.33156C2.34381 17.9794 1.53564 17.1712 1.53564 16.1835V9.52736C1.53564 8.53961 2.34381 7.73145 3.33156 7.73145H14.6571C15.6448 7.73145 16.453 8.53961 16.453 9.52736V16.1835C16.4642 17.1712 15.6561 17.9794 14.6683 17.9794ZM3.33156 8.6294C2.83769 8.6294 2.4336 9.03349 2.4336 9.52736V16.1835C2.4336 16.6774 2.83769 17.0814 3.33156 17.0814H14.6571C15.151 17.0814 15.555 16.6774 15.555 16.1835V9.52736C15.555 9.03349 15.151 8.6294 14.6571 8.6294H3.33156Z"
              fill="#666666"
            />
            <path
              d="M4.33057 8.62969C4.08363 8.62969 3.88159 8.42765 3.88159 8.18071V5.13888C3.88159 2.32153 6.17139 0.0205078 8.99996 0.0205078C11.0204 0.0205078 12.8612 1.2103 13.6806 3.06234C13.9724 3.71337 14.1183 4.42051 14.1183 5.13888C14.1183 5.38581 13.9163 5.58785 13.6693 5.58785C13.4224 5.58785 13.2204 5.38581 13.2204 5.13888C13.2204 4.54398 13.0969 3.9603 12.8612 3.42153C12.1877 1.90622 10.6724 0.918467 8.99996 0.918467C6.66526 0.918467 4.77955 2.81541 4.77955 5.13888V8.18071C4.77955 8.42765 4.57751 8.62969 4.33057 8.62969ZM8.94384 15.8246C8.24792 15.8246 7.67547 15.2521 7.67547 14.5562V13.5797C7.19282 13.1868 6.9122 12.6032 6.9122 11.9746C6.9122 10.8297 7.84384 9.88684 8.99996 9.88684C10.1561 9.88683 11.0877 10.8185 11.0877 11.9746C11.0877 12.6593 10.7622 13.2879 10.2122 13.6695V14.545C10.2122 15.2521 9.63975 15.8246 8.94384 15.8246ZM8.99996 10.7848C8.34894 10.7848 7.81016 11.3123 7.81016 11.9746C7.81016 12.3787 8.0122 12.7603 8.36016 12.9736C8.49486 13.0521 8.5622 13.1981 8.5622 13.3552V14.5562C8.5622 14.7583 8.73057 14.9266 8.93261 14.9266C9.13465 14.9266 9.30302 14.7583 9.30302 14.5562V13.4225C9.30302 13.2542 9.39282 13.097 9.53873 13.0297C9.93159 12.8277 10.1785 12.4236 10.1785 11.9746C10.1898 11.3236 9.65098 10.7848 8.99996 10.7848Z"
              fill="#666666"
            />
          </svg>
          <input
            v-model="forgetPwdForm.password"
            :type="forgetPwdForm.showPwd ? 'text' : 'password'"
            placeholder="请确认登录密码"
          />
          <div
            class="show-pwd"
            :class="{ close: !forgetPwdForm.showPwd }"
            @touchstart.prevent="forgetPwdForm.showPwd = !forgetPwdForm.showPwd"
          >
            <van-icon name="eye-o" class="block" />
          </div>
        </div>
        <div class="login-input">
          <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-input-icon">
            <path
              d="M14.6683 17.9794H3.33156C2.34381 17.9794 1.53564 17.1712 1.53564 16.1835V9.52736C1.53564 8.53961 2.34381 7.73145 3.33156 7.73145H14.6571C15.6448 7.73145 16.453 8.53961 16.453 9.52736V16.1835C16.4642 17.1712 15.6561 17.9794 14.6683 17.9794ZM3.33156 8.6294C2.83769 8.6294 2.4336 9.03349 2.4336 9.52736V16.1835C2.4336 16.6774 2.83769 17.0814 3.33156 17.0814H14.6571C15.151 17.0814 15.555 16.6774 15.555 16.1835V9.52736C15.555 9.03349 15.151 8.6294 14.6571 8.6294H3.33156Z"
              fill="#666666"
            />
            <path
              d="M4.33057 8.62969C4.08363 8.62969 3.88159 8.42765 3.88159 8.18071V5.13888C3.88159 2.32153 6.17139 0.0205078 8.99996 0.0205078C11.0204 0.0205078 12.8612 1.2103 13.6806 3.06234C13.9724 3.71337 14.1183 4.42051 14.1183 5.13888C14.1183 5.38581 13.9163 5.58785 13.6693 5.58785C13.4224 5.58785 13.2204 5.38581 13.2204 5.13888C13.2204 4.54398 13.0969 3.9603 12.8612 3.42153C12.1877 1.90622 10.6724 0.918467 8.99996 0.918467C6.66526 0.918467 4.77955 2.81541 4.77955 5.13888V8.18071C4.77955 8.42765 4.57751 8.62969 4.33057 8.62969ZM8.94384 15.8246C8.24792 15.8246 7.67547 15.2521 7.67547 14.5562V13.5797C7.19282 13.1868 6.9122 12.6032 6.9122 11.9746C6.9122 10.8297 7.84384 9.88684 8.99996 9.88684C10.1561 9.88683 11.0877 10.8185 11.0877 11.9746C11.0877 12.6593 10.7622 13.2879 10.2122 13.6695V14.545C10.2122 15.2521 9.63975 15.8246 8.94384 15.8246ZM8.99996 10.7848C8.34894 10.7848 7.81016 11.3123 7.81016 11.9746C7.81016 12.3787 8.0122 12.7603 8.36016 12.9736C8.49486 13.0521 8.5622 13.1981 8.5622 13.3552V14.5562C8.5622 14.7583 8.73057 14.9266 8.93261 14.9266C9.13465 14.9266 9.30302 14.7583 9.30302 14.5562V13.4225C9.30302 13.2542 9.39282 13.097 9.53873 13.0297C9.93159 12.8277 10.1785 12.4236 10.1785 11.9746C10.1898 11.3236 9.65098 10.7848 8.99996 10.7848Z"
              fill="#666666"
            />
          </svg>
          <input
            v-model="forgetPwdForm.confirmPassword"
            :type="forgetPwdForm.showPwd ? 'text' : 'password'"
            placeholder="请再次输入密码"
          />
          <div
            class="show-pwd"
            :class="{ close: !forgetPwdForm.showPwd }"
            @touchstart.prevent="forgetPwdForm.showPwd = !forgetPwdForm.showPwd"
          >
            <van-icon name="eye-o" class="block" />
          </div>
        </div>
        <div class="submit-btn mt-16" @click="handleForgetPwd">确认</div>
      </div>
      <div class="ui-content-fix extra-box">
        <div class="agreement">
          <div class="flex gap-4 items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="agreement-radio" viewBox="0 0 16 16" fill="none">
              <path
                d="M8 0C3.58257 0 0 3.58257 0 8C0 12.4174 3.58257 16 8 16C12.4174 16 16 12.4174 16 8C16 3.58257 12.4174 0 8 0ZM11.933 6.22123L7.58168 10.5743C7.43687 10.7191 7.24559 10.7924 7.05609 10.7924C6.8648 10.7924 6.67531 10.7191 6.5305 10.5743L4.06704 8.11263C3.95441 8 3.89363 7.85162 3.89363 7.69251C3.89363 7.53341 3.9562 7.38503 4.06704 7.2724C4.29944 7.04 4.67665 7.04 4.90726 7.2724L7.0543 9.41944L11.0927 5.38101C11.3251 5.1486 11.7006 5.1486 11.933 5.38101C12.0456 5.49363 12.1064 5.64201 12.1064 5.80112C12.1082 5.96022 12.0456 6.1086 11.933 6.22123Z"
                fill="url(#paint0_linear_297_4178)"
              />
              <defs>
                <linearGradient id="paint0_linear_297_4178" x1="8" y1="0" x2="8" y2="16" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#E92F08" />
                  <stop offset="1" stop-color="#6124E1" />
                </linearGradient>
              </defs>
            </svg>
            <div>
              我已阅读并同意
              <a class="agreement-link" @click.stop="showPolicy">能敬资本用户协议</a>
              的条款
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script setup lang="ts">
import SendCodeBtn from '~/components/scopes/SendCodeBtn.vue'
import { login, register, forgetPwd, sendLoginCode, sendForgetPwdCode } from '~/service/login'
useHead({
  title: '登录',
})
const route = useRoute()
const router = useRouter()
const loginForm = reactive({
  show: true,
  username: '',
  password: '',
  showPwd: false,
})
const registerForm = reactive({
  show: false,
  username: '',
  showPwd: false,
  password: '',
  confirmPassword: '',
  code: '',
  pCode: route.query.pCode || '',
  agree: true,
})
const forgetPwdForm = reactive({
  show: false,
  username: '',
  showPwd: false,
  password: '',
  confirmPassword: '',
  code: '',
})
const handleLogin = async () => {
  if (!loginForm.username) {
    return $message.error('请输入用户名/手机号')
  }
  if (!loginForm.password) {
    return $message.error('请输入密码')
  }
  await login({
    username: loginForm.username,
    password: loginForm.password,
  })
  router.replace('/')
}
const handleRegister = async () => {
  if (!registerForm.username) {
    return $message.error('请输入手机号')
  }
  if (!registerForm.password) {
    return $message.error('请输入密码')
  }
  if (!registerForm.confirmPassword) {
    return $message.error('请输入确认密码')
  }
  if (!registerForm.pCode) {
    return $message.error('请输入推荐码')
  }
  if (registerForm.password !== registerForm.confirmPassword) {
    return $message.error('密码和确认密码不一致')
  }
  await register({
    username: registerForm.username,
    password: registerForm.password,
    pCode: registerForm.pCode,
    phoneCode: registerForm.code,
  })
  loginForm.username = registerForm.username
  loginForm.password = registerForm.password
  handleLogin()
}
const handleForgetPwd = async () => {
  if (!forgetPwdForm.username) {
    return $message.error('请输入手机号')
  }
  if (!forgetPwdForm.code) {
    return $message.error('请输入验证码')
  }
  if (!forgetPwdForm.password) {
    return $message.error('请输入密码')
  }
  if (forgetPwdForm.password !== forgetPwdForm.confirmPassword) {
    return $message.error('密码和确认密码不一致')
  }
  await forgetPwd({
    username: forgetPwdForm.username,
    password: forgetPwdForm.password,
    phoneCode: forgetPwdForm.code,
  })
  $message.success('修改密码成功，请重新登录')
  checkView('login')
}
const showPolicy = async () => {
  //TODO
}
const checkView = (view: 'login' | 'register' | 'forgetPwd') => {
  if (view === 'login') {
    loginForm.show = true
    registerForm.show = false
    forgetPwdForm.show = false
  }
  if (view === 'register') {
    registerForm.show = true
    loginForm.show = false
    forgetPwdForm.show = false
  }
  if (view === 'forgetPwd') {
    loginForm.show = false
    registerForm.show = false
    forgetPwdForm.show = true
  }
}
const doSendCode = async (phone, cb) => {
  try {
    await sendLoginCode(phone)
    cb(true)
  } catch (e) {
    cb(false)
  }
}
const doSendForgetPwdCode = async (phone, cb) => {
  try {
    await sendForgetPwdCode(phone)
    cb(true)
  } catch (e) {
    cb(false)
  }
}
// const showSpecialCode = () => {
//   $alert('请联系客服获得特殊验证码！')
// }
if (route.query.pCode) {
  checkView('register')
}
</script>
<style lang="less" scoped>
.logo-box {
  position: absolute;
  left: 0;
  right: 0;
  height: 576px;
  background: url('/img/login-bg.png');
  background-size: cover;
  .logo {
    position: absolute;
    top: 200px;
    left: 0;
    right: 0;
    margin: auto;
    width: 132px;
    height: 132px;
    background: url('/public/img/logo-main.png');
    background-size: cover;
    z-index: 10;
    .logo-text {
      font-size: 44px;
      font-weight: bold;
      line-height: 48px;
      color: #000;
      white-space: nowrap;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -70px;
      margin: auto;
      display: flex;
      justify-content: center;
    }
  }
}

.login-box {
  background: var(--th-content-bg);
  padding: 520px 30px 0;
  position: relative;
  .view-bar {
    position: absolute;
    top: 70px;
    left: 30px;
    right: 0;
    gap: 12px;
    .back-btn {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      margin: auto;
      width: 40px;
      height: 32px;
    }
    .bar-text {
      font-size: 36px;
      color: #000000cc;
      width: 100%;
      text-align: center;
    }
  }
  .login-input {
    height: 68px;
    position: relative;
    margin-bottom: 24px;
    border-bottom: 1px solid var(--th-border-color);
    padding-left: 30px;
    .login-input-icon {
      width: 36px;
      height: 36px;
      position: absolute;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      margin: auto 0;
    }
    input {
      width: 100%;
      height: 100%;
      display: block;
      background: transparent;
      border: 0 none;
      font-size: 28px;
      padding: 0 24px;
      color: #151940;
      &::-webkit-input-placeholder {
        color: #666;
        font-weight: 400;
      }
    }
  }
  .show-pwd {
    position: absolute;
    right: 24px;
    top: 0;
    bottom: 0;
    margin: auto;
    width: 40px;
    height: 40px;
    font-size: 40px;
    color: #7f8192;
    &.close {
      &::after {
        content: '';
        position: absolute;
        left: calc(50% - 2px);
        top: -2px;
        height: 100%;
        width: 4px;
        background-color: #7f8192;
        transform: rotate(45deg);
      }
    }
  }
  .forget-pwd {
    &:extend(.font-gradient);
    font-size: 28px;
    display: flex;
    justify-content: end;
  }
  .register-btn {
    &:extend(.font-gradient);
    font-size: 28px;
    display: flex;
    justify-content: center;
    margin-top: 40px;
  }
  .code-btn {
    &:extend(.font-gradient);
    position: absolute;
    right: 24px;
    top: 0;
    bottom: 0;
    margin: auto;
    height: 40px;
    &.disabled {
      background-clip: none;
      -webkit-background-clip: none;
      -webkit-text-fill-color: #7f8192;
    }
  }
  .submit-btn {
    height: 100px;
    background: linear-gradient(90deg, #e92f08 0%, #6524e1 100%);
    font-size: 32px;
    color: #fff;
    border-radius: 50px;
    text-align: center;
    line-height: 100px;
  }
}
.extra-box {
  padding-top: 60px;
  padding-bottom: 40px;
  .agreement {
    color: #7f8192;
    margin-bottom: 40px;
    .agreement-link {
      &:extend(.font-gradient);
    }
    /* prettier-ignore */
    .agreement-radio {
      width: 18PX;
      height: 18PX;

      border-radius: 50%;
      position: relative;
      &.agreed {
        &::after {
          content: '';
          position: absolute;
          width: 10PX;
          height: 10PX;
          left: 2PX;
          top: 2PX;
          background: #12b888;
          border-radius: 50%;
        }
      }
    }
  }
}
</style>
